<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Miyabi Workout Generator ğŸŒ¸</title>
  <style>
    :root {
      --color-hair: #545a58;
      --color-coat: #45747b;
      --color-skin: #fdf2e7;
      --color-dress: #1b2123;
      --color-accent: #609090;
      --color-text: #306078;
      --color-bg-overlay: rgba(255,250,250,0.9);
    }
    body {
      margin:0;
      padding:40px;
      background-image: url('https://media1.tenor.com/m/IuadZ_DUSxYAAAAd/miyabi-hoshimi-miyabi.gif');
      background-size: cover;
      background-position: center;
      background-attachment: fixed;
      font-family: "Poppins", "Noto Sans JP", sans-serif;
      color: var(--color-text);
      text-align: center;
    }
    .overlay {
      background: var(--color-bg-overlay);
      border-radius: 20px;
      padding: 30px;
      max-width: 500px;
      margin: auto;
      box-shadow: 0 4px 20px rgba(69,116,123, 0.3);
      border: 2px solid var(--color-accent);
    }
    h1 {
      font-size: 2em;
      margin-bottom:10px;
      color: var(--color-accent);
      font-weight:bold;
    }
    input {
      width: 80%;
      padding:10px;
      margin-top:10px;
      border:2px solid var(--color-accent);
      border-radius:10px;
      text-align:center;
      font-size:1em;
      color: var(--color-text);
      background: #fff;
    }
    .category-buttons {
      margin-top: 15px;
    }
    .category-buttons button {
      margin:5px;
      font-size:0.9em;
      padding:8px 15px;
    }
    button.generate {
      background: linear-gradient(90deg, var(--color-accent), var(--color-coat));
      border:none;
      color:#fff;
      padding:12px 25px;
      border-radius:20px;
      font-size:1em;
      cursor:pointer;
      margin-top:15px;
      transition:0.2s;
      font-weight:bold;
      letter-spacing:0.5px;
    }
    button.generate:hover {
      background: linear-gradient(90deg, var(--color-coat), var(--color-accent));
      transform:scale(1.05);
    }
    .result {
      margin-top:20px;
      font-size:1.1em;
      color: var(--color-hair);
    }
    .divider {
      width:60%;
      height:2px;
      background: linear-gradient(to right, transparent, var(--color-accent), transparent);
      margin:15px auto;
    }
    .jumping-img {
      width: 300px;
      height: 300px;
      position: fixed;
      bottom: 10px;
      left: 10px;
      display: inline-block;
      animation: jump 0.5s ease-in-out infinite;
    }
    @keyframes jump {
      0%, 100% { transform: translateY(0); }
      50% { transform: translateY(-20px); }
    }
  </style>
</head>
<body>
  <div class="overlay">
    <h1> Miyabi Workout Generator </h1>
    <p>Enter your time and pick a category:</p>
    <input type="number" id="timeInput" placeholder="Minutes" min="1"><br>

    <div class="category-buttons">
      <button onclick="selectCategory('arms')">ğŸ’ª Arms</button>
      <button onclick="selectCategory('legs')">ğŸ¦µ Legs</button>
      <button onclick="selectCategory('core')">ğŸŒ¿ Core</button>
      <button onclick="selectCategory('full')">âœ¨ Full Body</button>
    </div>

    <button class="generate" onclick="generateWorkout()">âœ¨ Generate Workout âœ¨</button>
    <div class="divider"></div>
    <div class="result" id="result"></div>
  </div>

  <img src="https://media.tenor.com/ZnsC08opLI8AAAAi/nah-id.gif" alt="" class="jumping-img">

<script>
  let selectedCategory = 'full';

  function selectCategory(cat) {
    selectedCategory = cat;
    const buttons = document.querySelectorAll('.category-buttons button');
    buttons.forEach(btn => btn.style.border = '');
    event.target.style.border = '2px solid var(--color-accent)';
  }

  const workouts = [
    { name: "Jumping Jacks ğŸ’«", timePerSet: 2, category: "full" },
    { name: "Squats ğŸ‘", timePerSet: 3, category: "legs" },
    { name: "Arm Circles âœ¨", timePerSet: 2, category: "arms" },
    { name: "Plank ğŸŒ¿", timePerSet: 1, category: "core" },
    { name: "High Knees ğŸ€", timePerSet: 2, category: "legs" },
    { name: "Lunges ğŸ’•", timePerSet: 3, category: "legs" },
    { name: "Dance Freestyle ğŸ’ƒ", timePerSet: 3, category: "full" },
    { name: "Butt Kicks ğŸ’«", timePerSet: 2, category: "legs" },
    { name: "Soft Stretch ğŸŒ·", timePerSet: 1, category: "full" },
    { name: "Side Bends ğŸŒ¼", timePerSet: 2, category: "core" },
    { name: "Calf Raises ğŸ¦¶", timePerSet: 2, category: "legs" },
    { name: "Mini Jumps ğŸŒˆ", timePerSet: 1, category: "full" },
    { name: "Shadow Boxing ğŸ¥Š", timePerSet: 2, category: "arms" }
  ];

  async function generateWorkout() {
    const minutes = parseInt(document.getElementById("timeInput").value);
    const apiKey = document.getElementById("apiKey").value.trim();
 // replace with your API key
    const resultDiv = document.getElementById("result");

    if (!minutes || minutes <= 0) {
      resultDiv.innerHTML = "Please enter a valid number of minutes, lovely!";
      return;
    }

    resultDiv.innerHTML = "Generating your workoutâ€¦ âš”ï¸";

    if (apiKey) {
      // AI-generated workout via OpenAI
      try {
        const response = await fetch("https://api.openai.com/v1/chat/completions", {
          method: "POST",
          headers: {
            "Content-Type": "application/json",
            "Authorization": `Bearer ${apiKey}`
          },
          body: JSON.stringify({
            model: "gpt-4o-mini",
            messages: [
              { role: "system", content: "You are an elegant anime-style trainer inspired by Hoshimi Miyabi from Zenless Zone Zero. Provide bodyweight workouts for no equipment." },
              { role: "user", content: `I have ${minutes} minutes and I want a ${selectedCategory}-focused workout. No equipment. Please make it cute and powerful like Miyabi.` }
            ]
          })
        });

        const data = await response.json();
        if (data.error) {
          resultDiv.innerHTML = `<span style="color:red;">Error: ${data.error.message}</span>`;
          return;
        }

        const message = data.choices[0].message.content;
        resultDiv.innerHTML = `<strong>Your ${minutes}-minute Miyabi-style ${selectedCategory} workout ğŸ’–</strong><br><br>${message.replace(/\n/g, "<br>")}`;

      } catch (err) {
        console.error(err);
        resultDiv.innerHTML = "Oops! Something went wrong with AI. ğŸ˜¢ Using offline version instead.";
        generateOfflineWorkout(minutes);
      }
    } else {
      generateOfflineWorkout(minutes);
    }
  }

  function generateOfflineWorkout(minutes) {
    const resultDiv = document.getElementById("result");
    const filteredWorkouts = workouts.filter(w => selectedCategory === 'full' || w.category === selectedCategory);

    let total = 0;
    let plan = [];
    while (total < minutes) {
      const exercise = filteredWorkouts[Math.floor(Math.random() * filteredWorkouts.length)];
      if (total + exercise.timePerSet <= minutes) {
        plan.push(exercise.name);
        total += exercise.timePerSet;
      } else {
        break;
      }
    }

    if (plan.length === 0) {
      resultDiv.innerHTML = "Hmmâ€¦ thatâ€™s very short time. Try at least 1 minute!";
    } else {
      resultDiv.innerHTML = `<strong>Your ${minutes}-minute Miyabi-inspired ${selectedCategory}-workout ğŸ’–</strong><br><br>${plan.join("<br>")}<br><br>Move with grace and strength, like Miyabi.`;
    }
  }
</script>

</body>
</html>
