<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Miyabi Workout Generator ğŸŒ¸</title>
  <style>
    /* Hoshimi Miyabi inspired palette: from palette resource :contentReference[oaicite:3]{index=3} */
    :root {
      --color-hair: #545a58;
      --color-coat: #45747b;
      --color-skin: #fdf2e7;
      --color-dress: #1b2123;
      --color-accent: #609090;
      --color-text: #306078;
      --color-bg-overlay: rgba(255,250,250,0.9);
    }
    body {
      margin:0;
      padding:40px;
      background-image: url('https://media1.tenor.com/m/IuadZ_DUSxYAAAAd/miyabi-hoshimi-miyabi.gif');
      background-size: cover;
      background-position: center;
      background-attachment: fixed;
      font-family: "Poppins", "Noto Sans JP", sans-serif;
      color: var(--color-text);
      text-align: center;
    }
    .overlay {
      background: var(--color-bg-overlay);
      border-radius: 20px;
      padding: 30px;
      max-width: 480px;
      margin: auto;
      box-shadow: 0 4px 20px rgba(69,116,123, 0.3);
      border: 2px solid var(--color-accent);
    }
    h1 {
      font-size: 2em;
      margin-bottom:10px;
      color: var(--color-accent);
      font-weight:bold;
    }
    input, textarea {
      width: 80%;
      padding:10px;
      margin-top:10px;
      border:2px solid var(--color-accent);
      border-radius:10px;
      text-align:center;
      font-size:1em;
      color: var(--color-text);
      background: #fff;
    }
    button {
      background: linear-gradient(90deg, var(--color-accent), var(--color-coat));
      border:none;
      color:#fff;
      padding:12px 25px;
      border-radius:20px;
      font-size:1em;
      cursor:pointer;
      margin-top:15px;
      transition:0.2s;
      font-weight:bold;
      letter-spacing:0.5px;
    }
    button:hover {
      background: linear-gradient(90deg, var(--color-coat), var(--color-accent));
      transform:scale(1.05);
    }
    .result {
      margin-top:20px;
      font-size:1.1em;
      color: var(--color-hair);
    }
    .divider {
      width:60%;
      height:2px;
      background: linear-gradient(to right, transparent, var(--color-accent), transparent);
      margin:15px auto;
    }
     .jumping-img {
        width: 300px;
        height: 300px;
            position: fixed;
    bottom: 10px;
    left: 10px;
    display: inline-block;
    animation: jump 0.5s ease-in-out infinite; /* duration, easing, repeat */
  }

  /* Keyframes for jump effect */
  @keyframes jump {
    0%, 100% { transform: translateY(0); }  /* Start and end at original position */
    50% { transform: translateY(-20px); }   
    }
  </style>
</head>
<body>
  <div class="overlay">
    <h1> Miyabi Workout Generator </h1>
    <p>Enter how many minutes you have, and get a no-equipment workout inspired by Miyabiâ€™s grace and power.</p>
    <input type="number" id="timeInput" placeholder="some random time" min="1"><br>
 
    <button onclick="generateWorkout()">âœ¨ Generate Workout âœ¨</button>
    <div class="divider"></div>
    <div class="result" id="result"></div>
  </div>
  <img src="https://media.tenor.com/ZnsC08opLI8AAAAi/nah-id.gif" alt="" class="jumping-img">
  <script>
    const workouts = [
      { name: "Jumping Jacks ğŸ’«", timePerSet: 2 },
      { name: "Squats ğŸ‘", timePerSet: 3 },
      { name: "Arm Circles âœ¨", timePerSet: 2 },
      { name: "Plank ğŸŒ¿", timePerSet: 1 },
      { name: "High Knees ğŸ€", timePerSet: 2 },
      { name: "Lunges ğŸ’•", timePerSet: 3 },
      { name: "Dance Freestyle ğŸ’ƒ", timePerSet: 3 },
      { name: "Butt Kicks ğŸ’«", timePerSet: 2 },
      { name: "Soft Stretch ğŸŒ·", timePerSet: 1 },
      { name: "Side Bends ğŸŒ¼", timePerSet: 2 },
      { name: "Calf Raises ğŸ¦¶", timePerSet: 2 },
      { name: "Mini Jumps ğŸŒˆ", timePerSet: 1 },
      { name: "Shadow Boxing ğŸ¥Š", timePerSet: 2 }
    ];

    async function generateWorkout() {
      const minutes = parseInt(document.getElementById("timeInput").value);
      const apiKey = document.getElementById("apiKey").value.trim();
      const resultDiv = document.getElementById("result");

      if (!minutes || minutes <= 0) {
        resultDiv.innerHTML = "Please enter a valid number of minutes, lovely!";
        return;
      }

      resultDiv.innerHTML = "Generating your workoutâ€¦ âš”ï¸";

      if (apiKey) {
        // Use OpenAI API
        try {
          const response = await fetch("https://api.openai.com/v1/chat/completions", {
            method: "POST",
            headers: {
              "Content-Type": "application/json",
              "Authorization": `Bearer ${apiKey}`
            },
            body: JSON.stringify({
              model: "gpt-4o-mini",
              messages: [
                { role: "system", content: "You are an elegant, strong anime-style trainer inspired by Hoshimi Miyabi from Zenless Zone Zero. Provide a bodyweight workout plan for no equipment." },
                { role: "user", content: `I have ${minutes} minutes and no equipment. Please create a Miyabi-style no-equipment workout plan.` }
              ]
            })
          });
          const data = await response.json();
          if (data.error) {
            resultDiv.innerHTML = `<span style="color:red;">Error: ${data.error.message}</span>`;
            return;
          }
          const message = data.choices[0].message.content;
          resultDiv.innerHTML = `<strong>Your ${minutes}-minute Miyabi-style workout ğŸ’–</strong><br><br>${message.replace(/\n/g, "<br>")}`;
        } catch (err) {
          console.error(err);
          resultDiv.innerHTML = "Oops! Something went wrong. ğŸ˜¢";
        }
      } else {
        // Offline fallback
        let total = 0;
        let plan = [];
        while (total < minutes) {
          const exercise = workouts[Math.floor(Math.random() * workouts.length)];
          if (total + exercise.timePerSet <= minutes) {
            plan.push(exercise.name);
            total += exercise.timePerSet;
          } else {
            break;
          }
        }
        if (plan.length === 0) {
          resultDiv.innerHTML = "Hmmâ€¦ thatâ€™s very short time. Try at least 1 minute!";
        } else {
          resultDiv.innerHTML = `<strong>Your ${minutes}-minute Miyabi-inspired workout ğŸ’–</strong><br><br>${plan.join("<br>")}<br><br>Move with grace and strength, like Miyabi.`;
        }
      }
    }
  </script>
</body>
</html>
